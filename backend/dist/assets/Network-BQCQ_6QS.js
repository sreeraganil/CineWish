import{e as w,A as v,c as b,r as l,j as t,B as j,T as N,C as y}from"./index-Dce_IDGO.js";import{n as k}from"./networks-BdgdxRu4.js";const P=w((a,o)=>({networkId:null,media:"tv",items:[],page:1,totalPages:1,loading:!1,scrollPosition:0,setScrollPosition:n=>a({scrollPosition:n}),resetNetwork:()=>a({networkId:null,media:"tv",items:[],page:1,totalPages:1}),fetchNetwork:async({networkId:n,media:e="tv",page:i=1})=>{const{loading:d}=o();if(!d){a({loading:!0});try{const{data:r}=await v.get("/tmdb/discover",{params:{media:e,with_networks:n,page:i,sort_by:"popularity.desc"}});a(c=>({networkId:n,media:e,page:r.page,totalPages:r.total_pages,items:i===1?r.results:[...c.items,...r.results]}))}catch(r){console.error("Failed to fetch network:",r.message)}finally{a({loading:!1})}}}})),S=()=>{const{id:a}=b(),[o,n]=l.useState("tv"),e=k.find(s=>String(s.id)===a),i=l.useRef(null),{items:d,page:r,totalPages:c,loading:m,fetchNetwork:x,resetNetwork:f,networkId:u,scrollPosition:p,setScrollPosition:h}=P();return l.useEffect(()=>{if(u==a){setTimeout(()=>{window.scrollTo({top:p,behavior:"instant"})},0);return}window.scrollTo({top:0,behavior:"instant"}),f(),x({networkId:a,page:1,media:o})},[a,o]),l.useEffect(()=>{if(!i.current||m)return;const s=new IntersectionObserver(([g])=>{g.isIntersecting&&r<c&&x({networkId:a,page:r+1,media:o})},{rootMargin:"400px"});return s.observe(i.current),()=>s.disconnect()},[r,c,m]),l.useEffect(()=>{document.title=e?`Cinewish – ${e.name}`:"Cinewish – Network"},[e]),t.jsxs("div",{className:"bg-gray-950 min-h-screen text-white",onClickCapture:()=>h(window.scrollY),children:[t.jsx(j,{title:"Network"}),t.jsxs("section",{className:"relative overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${(e==null?void 0:e.gradient)||"from-gray-900 to-black"} opacity-60`}),t.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 py-20",children:[(e==null?void 0:e.image)&&t.jsx("img",{src:e.image,alt:e.name,className:"h-20 mb-6"}),t.jsx("h1",{className:"text-4xl font-bold",children:e==null?void 0:e.name})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-950 to-transparent"})]}),t.jsxs("section",{className:"max-w-7xl mx-auto px-3 sm:px-5 py-6 sm:py-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold",children:o==="movie"?"Movies":"TV Shows"}),t.jsx("div",{className:"flex bg-gray-900 rounded-lg p-1",children:["tv"].map(s=>t.jsx("button",{className:`px-3 md:px-4 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${o===s?"bg-teal-500 text-white":"text-gray-400 hover:text-white"}`,children:s==="movie"?"Movies":"TV"},s))})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:[d.map(s=>t.jsx(N,{...s},s.id)),m&&Array.from({length:10}).map((s,g)=>t.jsx(y,{},g))]}),t.jsx("div",{ref:i,className:"h-20 flex justify-center items-center mt-8"})]})]})};export{S as default};
