import{e as v,A as u,r as x,j as e,L as f,C as b,c as j,B as w}from"./index-Dce_IDGO.js";import{T as y}from"./index-C1uyLPS_.js";import{G as N}from"./genres-BI0AU9-D.js";const k=v((r,t)=>({genreId:null,media:"movie",items:[],page:1,totalPages:1,loading:!1,scrollPosition:0,setScrollPosition:l=>r({scrollPosition:l}),resetGenre:()=>r({genreId:null,items:[],page:1,totalPages:1}),fetchGenre:async({genreId:l,media:n="movie",page:i=1})=>{const{loading:s}=t();if(!s){r({loading:!0});try{const{data:a}=await u.get("/tmdb/discover",{params:{media:n,with_genres:l,page:i}});r(o=>({genreId:l,media:n,page:a.page,totalPages:a.total_pages,items:i===1?a.results:[...o.items,...a.results]}))}catch(a){console.error("Failed to fetch genre:",a.message)}finally{r({loading:!1})}}}})),C=({items:r,loading:t,hasMore:l,onLoadMore:n})=>{const i=x.useRef(null);return x.useEffect(()=>{if(!l||t)return;const s=new IntersectionObserver(([a])=>{a.isIntersecting&&n()},{rootMargin:"500px"});return i.current&&s.observe(i.current),()=>s.disconnect()},[l,t,n]),r.length?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 lg:px-4 py-1",children:[r.map((s,a)=>{var p,g;const o=s.media_type||"movie",d=s.title||s.name,h=(p=s.release_date)==null?void 0:p.slice(0,4),m=(g=s.vote_average)==null?void 0:g.toFixed(1);return e.jsxs(f,{to:`/details/${o}/${s.id}`,className:`\r
                min-w-[160px]\r
                my-1\r
                relative\r
                bg-gray-900\r
                rounded-xl\r
                border border-gray-800\r
                overflow-hidden\r
                shadow\r
                hover:border-teal-300\r
                transition-all\r
                group\r
              `,children:[e.jsx("img",{loading:"lazy",src:s.poster_path?`https://image.tmdb.org/t/p/w500${s.poster_path}`:"/placeholder.png",alt:d,className:`\r
                  h-48 w-full object-cover\r
                  group-hover:object-bottom\r
                  transition-all\r
                `}),e.jsxs("div",{className:"p-3 text-white",children:[e.jsx("h3",{className:"text-sm font-semibold truncate",children:d}),e.jsx("p",{className:"text-xs text-gray-400",children:h})]}),e.jsx("span",{className:"absolute top-2 right-2 bg-teal-600 text-white text-[10px] font-semibold px-2 py-0.5 rounded-full uppercase shadow-md",children:o}),m&&parseFloat(m)>0&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("div",{className:"flex items-center gap-1 bg-black/60 backdrop-blur-sm px-2 py-1 rounded-full",children:[e.jsx("svg",{className:"w-3 h-3 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),e.jsx("span",{className:"text-white text-xs font-semibold",children:m})]})})]},`${o}-${s.id}-${a}`)}),t&&Array.from({length:12}).map((s,a)=>e.jsx(b,{},`skeleton-${a}`))]}),l&&e.jsx("div",{ref:i,className:"flex justify-center py-12 text-teal-400 text-sm",children:t?"Loading…":"Scroll for more"})]}):e.jsxs("div",{className:"relative w-full flex flex-col items-center justify-center gap-4",children:[e.jsx(y,{src:"/lottie/no_result.lottie",loop:!0,autoplay:!0,style:{width:"clamp(100px, 40vw, 200px)",height:"clamp(100px, 40vw, 200px)",borderRadius:"50%",overflow:"hidden",marginTop:"100px"}}),e.jsx("p",{className:"text-center text-gray-600",children:"No results"})]})},P=()=>{const{id:r}=j(),t=N.find(c=>c.id==r),[l,n]=x.useState("movie"),{items:i,page:s,totalPages:a,loading:o,fetchGenre:d,resetGenre:h,genreId:m,scrollPosition:p,setScrollPosition:g}=k();return x.useEffect(()=>{if(m==r){setTimeout(()=>{window.scrollTo({top:p,behavior:"instant"})},0);return}window.scrollTo({top:0,behavior:"instant"}),h(),d({genreId:r,page:1,media:l})},[r]),x.useEffect(()=>{document.title=t!=null&&t.name?`Cinewish – ${t.name}`:"Cinewish – Genre"},[t]),e.jsxs("div",{className:"min-h-screen bg-gray-950 text-white",onClickCapture:()=>g(window.scrollY),children:[e.jsx(w,{title:"Genre"}),e.jsxs("section",{className:"relative overflow-hidden",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${(t==null?void 0:t.gradient)||"from-gray-900 to-black"} opacity-60`}),e.jsx("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_50%_50%,rgba(20,184,166,0.1),transparent_50%)]"}),e.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 py-12 sm:py-16 md:py-20",children:e.jsxs("div",{className:"text-center md:text-left",children:[(t==null?void 0:t.icon)&&e.jsx("div",{className:"mb-4 sm:mb-6 flex justify-center md:justify-start",children:e.jsx("div",{className:"bg-teal-500/20 backdrop-blur-sm p-4 sm:p-6 rounded-2xl border border-teal-500/30",children:e.jsx("span",{className:"text-4xl sm:text-5xl",children:t.icon})})}),e.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-3 sm:mb-4 bg-gradient-to-r from-white to-gray-300 bg-clip-text text-transparent",children:(t==null?void 0:t.name)||"Genre"}),(t==null?void 0:t.description)&&e.jsx("p",{className:"text-sm sm:text-base text-gray-300 max-w-2xl mx-auto md:mx-0 mb-4",children:t.description}),e.jsxs("div",{className:"flex flex-wrap gap-3 sm:gap-4 justify-center md:justify-start text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 sm:px-4 py-1.5 sm:py-2 rounded-full",children:[e.jsx("span",{className:"material-symbols-outlined text-teal-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",children:e.jsx("path",{d:"M18 3v2h-2V3H8v2H6V3H4v18h2v-2h2v2h8v-2h2v2h2V3h-2zM8 17H6v-2h2v2zm0-4H6v-2h2v2zm0-4H6V7h2v2zm6 10h-4V5h4v14zm4-2h-2v-2h2v2zm0-4h-2v-2h2v2zm0-4h-2V7h2v2z"})})}),e.jsx("span",{className:"text-gray-300",children:"Genre Collection"})]}),i.length>0&&e.jsxs("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 sm:px-4 py-1.5 sm:py-2 rounded-full",children:[e.jsx("span",{className:"material-symbols-outlined text-teal-400",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24",fill:"currentColor",children:e.jsx("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"})})}),e.jsxs("span",{className:"text-gray-300",children:[i.length," items loaded"]})]})]})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-16 sm:h-24 bg-gradient-to-t from-gray-950 to-transparent"})]}),e.jsxs("section",{className:"max-w-7xl mx-auto px-3 sm:px-5 py-6 sm:py-8",children:[e.jsx("div",{className:"flex flex-col gap-4 mb-6 sm:mb-8",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-white truncate",children:l==="movie"?"Movies":"TV Shows"})}),e.jsx("div",{className:"relative inline-flex bg-gray-900/50 backdrop-blur-sm rounded-lg p-0.5 border border-gray-800",children:["movie","tv"].map(c=>e.jsx("button",{onClick:()=>{n(c),window.scrollTo({top:0,behavior:"instant"}),h(),d({genreId:r,page:1,media:c})},className:`px-3 md:px-5 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${l===c?"bg-teal-500 text-white":"text-gray-400 hover:text-white"}`,children:c==="movie"?"Movies":"TV"},c))})]})}),e.jsx(C,{items:i,loading:o,hasMore:s<a,onLoadMore:()=>d({genreId:r,page:s+1})})]})]})};export{P as default};
