import{j as e,L as l,r as n,B as c}from"./index-Dce_IDGO.js";import{w as i,C as d}from"./ContinueWatching-547Tqnv7.js";import{L as h}from"./Loader-fqv60wXc.js";const p=({items:a,onRemove:t})=>a!=null&&a.length?e.jsxs("section",{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-teal-400",children:"Watch History"}),e.jsx("div",{className:"h-1 w-20 bg-gradient-to-r from-teal-400 to-cyan-400 rounded-full mt-2"})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-7 gap-4",children:a.map(s=>{const o=s.mediaType==="tv"?`/watch/tv/${s.mediaId}/${s.season}/${s.episode}`:`/watch/movie/${s.mediaId}`;return e.jsxs(l,{to:o,state:{title:s.title,progressSeconds:s.progressSeconds,poster:s.poster,backdrop:s.backdrop},className:"group relative bg-gray-900 border border-gray-800 rounded-xl overflow-hidden hover:border-teal-500/50 hover:shadow-lg hover:shadow-teal-500/10 transition-all duration-300 hover:-translate-y-1",children:[e.jsxs("div",{className:"relative h-[240px] bg-gray-800 overflow-hidden",children:[e.jsx("img",{src:s.poster,alt:s.title,onError:r=>{r.currentTarget.src="/placeholder.png"},className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsx("button",{onClick:r=>{r.preventDefault(),r.stopPropagation(),t==null||t(s)},className:"absolute top-2 right-2 z-20 w-7 h-7 rounded-full bg-black/80 backdrop-blur-sm text-white flex items-center justify-center hover:bg-red-500 hover:scale-110 transition-all duration-200 shadow-lg opacity-0 group-hover:opacity-100",children:e.jsx("span",{className:"text-sm font-bold",children:"✕"})}),e.jsxs("div",{className:"p-3 space-y-1.5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white truncate group-hover:text-teal-300 transition-colors duration-200",children:s.title??"Unknown"}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"inline-flex items-center gap-1.5 px-2 py-0.5 bg-gray-800 rounded text-[11px] text-gray-300 font-medium",children:s.mediaType==="tv"?e.jsxs(e.Fragment,{children:[e.jsxs("span",{children:["S",s.season]}),e.jsx("span",{className:"text-gray-600",children:"•"}),e.jsxs("span",{children:["E",s.episode]})]}):"Movie"})}),e.jsx("p",{className:"text-[11px] text-teal-400 font-medium",children:new Date(s.lastWatchedAt).toLocaleDateString()})]})]},`${s.mediaType}-${s.mediaId}-${s.season}-${s.episode}`)})})]}):null,m=()=>{const{continueWatching:a,history:t,loading:s,fetchWatchProgress:o,removeFromHistory:r}=i();return n.useEffect(()=>{o()},[o]),s?e.jsx("div",{className:"h-screen",children:e.jsx(h,{})}):e.jsxs(e.Fragment,{children:[e.jsx(c,{title:"History"}),e.jsxs("div",{className:"min-h-[calc(100%-72px)] bg-slate-950 px-6 pb-8",children:[e.jsx(d,{items:a,onRemove:r}),e.jsx(p,{items:t,onRemove:r})]})]})};export{m as default};
