import{e as w,A as v,c as b,r as l,j as t}from"./index-CZzhZSbx.js";import{T as j}from"./TrendingCard-CFxaXnAR.js";import{C as N}from"./CardSkeleton-BdTlfYOo.js";import{B as y}from"./BackHeader-BbS-zjJy.js";import{n as k}from"./networks-Dh7cTokb.js";const P=w((r,a)=>({networkId:null,media:"tv",items:[],page:1,totalPages:1,loading:!1,scrollPosition:0,setScrollPosition:n=>r({scrollPosition:n}),resetNetwork:()=>r({networkId:null,media:"tv",items:[],page:1,totalPages:1}),fetchNetwork:async({networkId:n,media:e="tv",page:i=1})=>{const{loading:d}=a();if(!d){r({loading:!0});try{const{data:o}=await v.get("/tmdb/discover",{params:{media:e,with_networks:n,page:i,sort_by:"popularity.desc"}});r(c=>({networkId:n,media:e,page:o.page,totalPages:o.total_pages,items:i===1?o.results:[...c.items,...o.results]}))}catch(o){console.error("Failed to fetch network:",o.message)}finally{r({loading:!1})}}}})),M=()=>{const{id:r}=b(),[a,n]=l.useState("tv"),e=k.find(s=>String(s.id)===r),i=l.useRef(null),{items:d,page:o,totalPages:c,loading:m,fetchNetwork:x,resetNetwork:f,networkId:p,scrollPosition:u,setScrollPosition:h}=P();return l.useEffect(()=>{if(p==r){setTimeout(()=>{window.scrollTo({top:u,behavior:"instant"})},0);return}window.scrollTo({top:0,behavior:"instant"}),f(),x({networkId:r,page:1,media:a})},[r,a]),l.useEffect(()=>{if(!i.current||m)return;const s=new IntersectionObserver(([g])=>{g.isIntersecting&&o<c&&x({networkId:r,page:o+1,media:a})},{rootMargin:"400px"});return s.observe(i.current),()=>s.disconnect()},[o,c,m]),l.useEffect(()=>{document.title=e?`Cinewish – ${e.name}`:"Cinewish – Network"},[e]),t.jsxs("div",{className:"bg-gray-950 min-h-screen text-white",onClickCapture:()=>h(window.scrollY),children:[t.jsx(y,{title:"Network"}),t.jsxs("section",{className:"relative overflow-hidden",children:[t.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${(e==null?void 0:e.gradient)||"from-gray-900 to-black"} opacity-60`}),t.jsxs("div",{className:"relative max-w-7xl mx-auto px-6 py-20",children:[(e==null?void 0:e.image)&&t.jsx("img",{src:e.image,alt:e.name,className:"h-20 mb-6"}),t.jsx("h1",{className:"text-4xl font-bold",children:e==null?void 0:e.name})]}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-24 bg-gradient-to-t from-gray-950 to-transparent"})]}),t.jsxs("section",{className:"max-w-7xl mx-auto px-3 sm:px-5 py-6 sm:py-8",children:[t.jsxs("div",{className:"flex items-center justify-between mb-8",children:[t.jsx("h2",{className:"text-3xl font-bold",children:a==="movie"?"Movies":"TV Shows"}),t.jsx("div",{className:"flex bg-gray-900 rounded-lg p-1",children:["tv"].map(s=>t.jsx("button",{className:`px-3 md:px-4 py-1.5 rounded-md text-xs font-medium transition-all duration-200 ${a===s?"bg-teal-500 text-white":"text-gray-400 hover:text-white"}`,children:s==="movie"?"Movies":"TV"},s))})]}),t.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-6",children:[d.map(s=>t.jsx(j,{...s},s.id)),m&&Array.from({length:10}).map((s,g)=>t.jsx(N,{},g))]}),t.jsx("div",{ref:i,className:"h-20 flex justify-center items-center mt-8"})]})]})};export{M as default};
